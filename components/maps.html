<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Battle Arena</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/maps.css">
    <script src="../js/sound.js"></script>
</head>
<body>
    <div class="background-container"></div>
    
    <div id="mapSelect">
        <div class="select-header">
            <h2 class="font-title">CHOOSE YOUR ARENA</h2>
        </div>
        
        <div class="maps-grid">
            <div class="map-card" data-map="temple" 
                 onmousedown="SoundManager.playClickSound()" 
                 onmouseover="SoundManager.playHoverSound()">
                <div class="map-preview">
                    <img src="../assests/maps/Celestial_Palace.gif" alt="Temple">
                </div>
                <div class="map-info">
                    <h3 class="map-card-title">SHAOLIN TEMPLE</h3>
                    <p class="font-display">Ancient grounds of combat</p>
                </div>
            </div>

            <div class="map-card" data-map="palace" 
                 onmousedown="SoundManager.playClickSound()" 
                 onmouseover="SoundManager.playHoverSound()">
                <div class="map-preview">
                    <img src="../assests/maps/Haunted.gif" alt="Palace">
                </div>
                <div class="map-info">
                    <h3 class="map-card-title">OUTWORLD PALACE</h3>
                    <p class="font-display">Throne of the emperor</p>
                </div>
            </div>

            <div class="map-card" data-map="pit" 
                 onmousedown="SoundManager.playClickSound()" 
                 onmouseover="SoundManager.playHoverSound()">
                <div class="map-preview">
                    <img src="../assests/maps/TheChinaTown.gif" alt="The Pit">
                </div>
                <div class="map-info">
                    <h3 class="map-card-title">THE PIT</h3>
                    <p class="font-display">No mercy, only death</p>
                </div>
            </div>

            <div class="map-card" data-map="bridge" 
                 onmousedown="SoundManager.playClickSound()" 
                 onmouseover="SoundManager.playHoverSound()">
                <div class="map-preview">
                    <img src="../assests/maps/Giaia.gif" alt="Bridge">
                </div>
                <div class="map-info">
                    <h3 class="map-card-title">DEAD POOL</h3>
                    <p class="font-display">Bridge of destiny</p>
                </div>
            </div>
        </div>

        <div class="button-container">
            <button id="backButton" class="font-title back-button" 
                    onmousedown="SoundManager.playClickSound(); setTimeout(function() { goToPlayerSelection(); }, 300);" 
                    onmouseover="SoundManager.playHoverSound()">BACK</button>
            
            <button id="startFight" class="font-title" style="display: none;"
                    onmousedown="SoundManager.playClickSound(); setTimeout(function() { goToFight(); }, 300);" 
                    onmouseover="SoundManager.playHoverSound()">FIGHT!</button>
        </div>
    </div>
    <script src="../js/map.js"></script>
    <script>
        // Ensure audio is initialized properly
        document.addEventListener('DOMContentLoaded', function() {
            // Add a click handler to the document to enable audio
            const initAudio = function() {
                console.log('User interaction detected, initializing audio...');
                
                // Start background music
                if (window.SoundManager) {
                    SoundManager.playBackgroundMusic('mapSelect');
                }
                
                // Remove this event listener
                document.removeEventListener('click', initAudio);
                document.removeEventListener('keydown', initAudio);
            };
            
            // Listen for both click and keydown events
            document.addEventListener('click', initAudio);
            document.addEventListener('keydown', initAudio);
            
            // Also try to play music after a short delay
            setTimeout(function() {
                if (window.SoundManager) {
                    SoundManager.playBackgroundMusic('mapSelect');
                }
            }, 1000);
        });
    </script>
</body>
</html>